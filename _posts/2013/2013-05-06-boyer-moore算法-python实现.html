---
layout: post
title: Boyer-Moore算法 python实现
categories:
- program
tags: []
published: true
comments: true
---
<p>看了<a href="http://www.ruanyifeng.com/blog/2013/05/boyer-moore_string_search_algorithm.html?utm_source=feedly">字符串匹配的Boyer-Moore算法</a>后觉得很有用就写一个实现了一下
<pre lang="python">
def badcharrule(ori,sear):
	if len(ori)!=len(sear):
		print "error"
	else:
		le=len(ori)
		badindex=-1
		lastindex=-1
		for i in xrange(le-1,0,-1):
			if ori[i]==sear[i]:
				pass
			else:
				badindex=i
				break
		if badindex==-1:
			pass
		else:
			for i in xrange(0,le):
				if sear[i]==ori[badindex]:
					lastindex=i
					break
				else:
					pass
		return badindex-lastindex
def goodpostfixrule(ori,sear):
	if len(ori)!=len(sear):
		print "error"
	else:
		le=len(ori)
		postfix=0
		for i in xrange(le-1,0,-1):
			if ori[i]==sear[i]:
				postfix+=1
			else:
				break
		if postfix==0:
			return -1
		else:
			postfixstring=sear[-postfix:]
			restori=sear[:-postfix]
			if restori.find(postfixstring)==-1:
				restori=postfixstring[:-1]+restori
				if restori.find(postfixstring)==-1:
					return -1
				else:
					return len(sear)-restori.find(postfixstring)-1
			else:
				return len(sear)-restori.find(postfixstring)-len(postfixstring)</pre></p>

<p>def movestep(ori,sear):<br />
	gu=badcharrule(ori,sear)<br />
	if gu==0:<br />
		return 0<br />
	else:<br />
		return max(gu,goodpostfixrule(ori,sear))</p>

<p>oristring="here is a simple example"<br />
searchstring="example"</p>

<p>index=0<br />
while index+len(searchstring)<=len(oristring):<br />
	move=movestep(oristring[index:index+len(searchstring)],searchstring)<br />
	if move==0:<br />
		print "find it index=%s" %index<br />
		index+=len(searchstring)<br />
	else:<br />
		index+=move<br />
print "search over"
</p>
