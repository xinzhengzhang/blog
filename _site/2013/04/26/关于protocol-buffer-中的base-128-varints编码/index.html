<h3>工作</h3>

<ol>
<li>host在github上</li>
<li>安装jekyll bootstrap~~简称jb~~</li>
<li>导出wordpress评论以及内容</li>
<li>处理wordpress的内容转化为markdown</li>
<li>注意事项</li>
</ol>

<h4><a href="https://pages.github.com/">host在github上</a></h4>

<ol>
<li>新建一个username.github.io的repo</li>
<li><a href="https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages">绑定域名</a></li>
</ol>

<h4><a href="http://jekyllbootstrap.com/">安装<del>jb</del></a></h4>

<ol>
<li>安装jekyll</li>
<li>clone代码 并看一下sample的样例以及api</li>
</ol>

<hr>

<h4>导出wordpress评论以及内容</h4>

<ul>
<li>导出评论

<ul>
<li>由于github page采用的是纯静态的、评论这种那么麻烦的东西索性还是交给第三方好啦= =在github上我使用的是<a href="http://disqus.com/">disqus</a>，他也同时提供从wordpress导出的功能</li>
<li>创建 disqus账号 <disqus.com/admin/create></li>
<li>添加自己的site并安装wp插件 <a href="http://wordpress.org/plugins/disqus-comment-system/">http://wordpress.org/plugins/disqus-comment-system/</a></li>
<li>等待disques后台进程帮你抓完会通知你的</li>
</ul></li>
<li>导出内容

<ul>
<li>导出content 使用wordpress的导出工具导出xml即可</li>
</ul></li>
</ul>

<h4>转换内容</h4>

<ul>
<li><p>导出mark down</p>

<ul>
<li><del>jekyll 有一个jekyll-import 的工具、不过中文支持的巨差无比</del></li>
<li>使用一个改进过对中文支持的版本 <a href="https://gist.github.com/chitsaou/1394128">https://gist.github.com/chitsaou/1394128</a></li>
<li>导出的xml命名 (wordpress.xml) 如下命令会把为你生成一拖post 以及wordpress中的page
<code>ruby
ruby -r &quot;./wordpressdotcom.rb&quot; -e &quot;Jekyll::WordpressDotCom.process&quot;
</code></li>
<li>如果在wordpress中没有使用什么插件类似<strong>codebox</strong>这样的到这一步就导入成功了</li>
<li>如果使用了一些奇怪的语法在html用插件解出来的格式就一塌糊涂了，比如我的所有的代码都是用codebox的……
写了一段简单的脚本来处理html，基本思路都是文本解析到codebox的开始标签pre然后替换掉
<code>python
__author__ = &#39;zhangxinzheng&#39;
# -*- coding: utf-8 -*-
import sys
import re
import os
def f(filename):
if filename.find(&quot;html&quot;) == -1:
return
targetName = filename.replace(&quot;html&quot;,&quot;md&quot;)
fd = open(filename, &quot;r+&quot;)
str = &#39;&#39;.join(fd.readlines())
while str.find(&quot;&lt;pre&quot;) != -1:
tempString=&quot;\n</code>\n&quot;
isContent = False
startIndex = str.find(&quot;<pre")
endIndex = len(str)
realEnd = startIndex
leftCount = 1
rightCount = 0
for j in xrange(startIndex, endIndex):
    if str[j] == '<':
        isContent = False
        leftCount +=1
    if isContent:
        tempString+=str[j]
    if str[j] == '>&#39;:
        isContent = True
        rightCount +=1
        realEnd = j
    if leftCount == rightCount:
        break
str+=&quot;\n```\n&quot;
str=str.replace(str[startIndex:realEnd], tempString)
fd.close()</li>
</ul>

<p>fd = open(targetName, &quot;w+&quot;)
fd.write(str)
fd.close()
os.remove(filename)</p></li>
</ul>

<p>if <strong>name</strong> == &quot;<strong>main</strong>&quot;:
    for i in sys.argv:
        f(i)
  ```</p>
